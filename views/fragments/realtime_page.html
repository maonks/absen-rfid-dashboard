<div id="table">
  <div
    hx-get="/api/absen/table"
    hx-trigger="load"
    hx-target="#table"
    hx-swap="innerHTML"
    class="text-gray-500"
  ></div>
</div>

<div
  id="absen-table"
  hx-get="/api/absen/table"
  hx-trigger="reload"
  hx-swap="outerHTML"
>
</div>

<!-- TABLE WRAPPER -->
<div class="overflow-x-auto md:overflow-visible">

<table class="min-w-full text-[11px] md:text-sm
              border border-gray-200 rounded-lg overflow-hidden">

  <thead class="bg-gray-100 text-gray-700">
    <tr>
      <th class="py-2 px-2 md:p-3 text-center w-10">No</th>

      <th class="py-2 px-2 md:p-3 text-center">
        Nama
      </th>

      <!-- HIDDEN DI MOBILE -->
      <th class="hidden md:table-cell py-2 px-2 md:p-3 text-center">
        UID
      </th>

      <!-- HIDDEN DI MOBILE -->
      <th class="hidden md:table-cell py-2 px-2 md:p-3 text-center">
        Device
      </th>

      <th class="py-2 px-2 md:p-3 text-center">
        Waktu
      </th>
    </tr>
  </thead>

  <tbody>
  {{ range $i, $r := .Rows }}
    <tr class="border-t hover:bg-gray-50 transition">

      <!-- NO -->
      <td class="py-1.5 px-2 md:p-3 text-center font-medium">
        {{ add $i 1 }}
      </td>

      <!-- NAMA -->
      <td class="py-1.5 px-2 md:p-3 text-center font-medium whitespace-nowrap">
        {{ $r.Nama }}

        {{ if eq $r.Nama "PENDING" }}
          <button
            type="button"
            hx-get="/api/kartu/{{ $r.Uid }}/edit"
            hx-target="#modal"
            hx-swap="innerHTML"
            class="ml-1 text-[10px] md:text-xs text-blue-600 hover:underline"
          >
            ✏️ Edit
          </button>
        {{ end }}
      </td>

      <!-- UID (DESKTOP ONLY) -->
      <td class="hidden md:table-cell py-1.5 px-2 md:p-3
                 text-center font-mono text-gray-700">
        {{ $r.Uid }}
      </td>

      <!-- DEVICE (DESKTOP ONLY) -->
      <td class="hidden md:table-cell py-1.5 px-2 md:p-3 text-center">
        <span class="px-2 py-0.5 text-xs rounded
                     bg-blue-100 text-blue-700">
          {{ $r.DeviceId }}
        </span>
      </td>

      <!-- WAKTU -->
      <td class="py-1.5 px-2 md:p-3 text-center text-gray-600 whitespace-nowrap">
        {{ $r.Waktu }}
      </td>
    </tr>

  {{ else }}
    <tr>
      <td colspan="5" class="py-6 text-center text-gray-500">
        ❌ Tidak ada data absensi
      </td>
    </tr>
  {{ end }}
  </tbody>
</table>

</div>
