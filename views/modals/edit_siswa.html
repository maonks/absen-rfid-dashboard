<div class="fixed inset-0 z-50 bg-black/50 flex">

  <!-- MODAL CONTAINER -->
  <div class="bg-white w-full md:max-w-2xl md:mx-auto
              md:my-6
              flex flex-col
              rounded-none md:rounded-lg
              shadow-lg">

    <!-- HEADER (STICKY) -->
    <div class="flex items-center justify-between
                px-4 py-3
                border-b
                sticky top-0 bg-white z-10">
      <h3 class="text-sm md:text-base font-semibold">
        ✏️ Edit Data Siswa
      </h3>
      <button
        type="button"
        onclick="closeModal()"
        class="text-gray-500 text-xl leading-none"
      >
        ✕
      </button>
    </div>

    <!-- FORM -->
    <form
      hx-post="/siswa/{{ .Siswa.ID }}/update"
      hx-target="#modal"
      hx-swap="innerHTML"
      class="flex-1 overflow-y-auto
             px-4 py-3
             grid grid-cols-1 md:grid-cols-2
             gap-3
             text-[12px] md:text-sm"
    >

      <!-- ID -->
      <div>
        <label class="block text-gray-600 mb-1">ID</label>
        <input
          value="{{ .Siswa.ID }}"
          readonly
          class="w-full border rounded-md px-3 py-2
                 bg-gray-100 text-gray-500"
        >
        <input type="hidden" name="id" value="{{ .Siswa.ID }}">
      </div>

      <!-- NIS -->
      <div>
        <label class="block text-gray-600 mb-1">NIS</label>
        <input
          name="nis"
          value="{{ .Siswa.NIS }}"
          required
          class="w-full border rounded-md px-3 py-2 font-mono"
        >
      </div>

      <!-- NAMA -->
      <div>
        <label class="block text-gray-600 mb-1">Nama</label>
        <input
          name="nama"
          value="{{ .Siswa.Nama }}"
          required
          class="w-full border rounded-md px-3 py-2"
        >
      </div>

      <!-- KARTU RFID -->
      <div>
        <label class="block text-gray-600 mb-1">Kartu RFID</label>
        <select
          name="kartu_id"
          class="w-full border rounded-md px-3 py-2 font-mono"
        >
          <option value="">-- Tanpa Kartu --</option>
          {{ range .KartuPilihan }}
          <option
            value="{{ .ID }}"
            {{ if $.KartuAktif }}{{ if eq .ID $.KartuAktif.ID }}selected{{ end }}{{ end }}
          >
            {{ .UID }} {{ if .SiswaID }}(Dipakai){{ else }}(FREE){{ end }}
          </option>
          {{ end }}
        </select>
        <p class="text-[10px] text-gray-400 mt-1">
          Kartu aktif otomatis terpilih, bisa diganti ke kartu FREE
        </p>
      </div>

      <!-- JENIS KELAMIN -->
      <div>
        <label class="block text-gray-600 mb-1">Jenis Kelamin</label>
        <select
          name="jenis_kelamin"
          class="w-full border rounded-md px-3 py-2"
        >
          <option value="L" {{ if eq .Siswa.JenisKelamin "L" }}selected{{ end }}>Laki-laki</option>
          <option value="P" {{ if eq .Siswa.JenisKelamin "P" }}selected{{ end }}>Perempuan</option>
        </select>
      </div>

      <!-- TEMPAT LAHIR -->
      <div>
        <label class="block text-gray-600 mb-1">Tempat Lahir</label>
        <input
          name="tempat_lahir"
          value="{{ .Siswa.TempatLahir }}"
          class="w-full border rounded-md px-3 py-2"
        >
      </div>

      <!-- TANGGAL LAHIR -->
      <div>
        <label class="block text-gray-600 mb-1">Tanggal Lahir</label>
        <input
          type="date"
          name="tanggal_lahir"
          value="{{ .Siswa.TanggalLahir.Format "2006-01-02" }}"
          class="w-full border rounded-md px-3 py-2"
        >
      </div>

      <!-- KELAS -->
      <div>
        <label class="block text-gray-600 mb-1">Kelas</label>
        <select
          name="kelas"
          class="w-full border rounded-md px-3 py-2"
        >
          {{range .KelasList}}
            <option 
              value="{{.ID}}"
              {{if eq .ID $.Siswa.KelasID}}selected{{end}}
            >
              {{.Nama}}
            </option>
          {{end}}
        </select>
      </div>

      <!-- JURUSAN -->
      <div>
        <label class="block text-gray-600 mb-1">Jurusan</label>
        <select name="jurusan"
                class="w-full border rounded-md px-3 py-2"
        >
        {{range .JurusanList}}
          <option 
            value="{{.ID}}"
            {{if eq .ID $.Siswa.JurusanID}}selected{{end}}
          >
            {{.Nama}}
          </option>
        {{end}}
        </select>
      </div>

      <!-- ALAMAT -->
      <div class="md:col-span-2">
        <label class="block text-gray-600 mb-1">Alamat</label>
        <textarea
          name="alamat"
          rows="2"
          class="w-full border rounded-md px-3 py-2"
        >{{ .Siswa.Alamat }}</textarea>
      </div>

      <!-- NAMA WALI -->
      <div>
        <label class="block text-gray-600 mb-1">Nama Wali</label>
        <input
          name="nama_wali"
          value="{{ .Siswa.NamaWali }}"
          class="w-full border rounded-md px-3 py-2"
        >
      </div>

      <!-- NO HP -->
      <div>
        <label class="block text-gray-600 mb-1">No HP</label>
        <input
          name="no_hp"
          value="{{ .Siswa.NoHP }}"
          class="w-full border rounded-md px-3 py-2"
        >
      </div>

      <!-- STATUS -->
      <div>
        <label class="block text-gray-600 mb-1">Status</label>
        <select
          name="status"
          class="w-full border rounded-md px-3 py-2"
        >
          <option value="aktif" {{ if eq .Siswa.Status "aktif" }}selected{{ end }}>Aktif</option>
          <option value="nonaktif" {{ if eq .Siswa.Status "nonaktif" }}selected{{ end }}>Nonaktif</option>
        </select>
      </div>

      <!-- FOOTER ACTION (STICKY BOTTOM) -->
      <div class="md:col-span-2
                  sticky bottom-0 bg-white
                  pt-3 pb-2
                  border-t
                  flex flex-col md:flex-row
                  gap-2">
        <button
          type="button"
          onclick="closeModal()"
          class="w-full md:w-auto
                 px-4 py-2
                 border rounded-md
                 text-gray-600"
        >
          Batal
        </button>
        <button
          type="submit"
          class="w-full md:w-auto
                 px-4 py-2
                 bg-green-600 text-white
                 rounded-md"
        >
          Simpan Perubahan
        </button>
      </div>

    </form>

  </div>

</div>
