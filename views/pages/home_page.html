<div
  id="home-realtime"
  hx-get="/api/home/realtime"
  hx-trigger="reload"
  hx-swap="outerHTML"
>


  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">

    <!-- ================= SISWA HADIR ================= -->
    <div class="bg-slate-50 border border-slate-200 rounded-lg shadow-sm p-3">

      <h2 class="text-sm font-semibold text-slate-700 mb-2">
        Siswa Hadir
      </h2>

      <!-- WRAPPER UNTUK MOBILE SCROLL -->
      <div class="overflow-x-auto md:overflow-visible">
        <table class="min-w-full text-[11px] md:text-xs border border-slate-200 rounded-md overflow-hidden">
          <thead class="bg-slate-100 text-slate-700">
            <tr>
              <th class="py-2 px-2 text-center w-8">No</th>

              <!-- HIDDEN DI MOBILE -->
              <th class="hidden md:table-cell py-2 px-2 text-center">
                ID
              </th>

              <th class="py-2 px-2 text-left">
                Nama
              </th>

              <th class="py-2 px-2 text-center">
                Masuk
              </th>

              <!-- HIDDEN DI MOBILE -->
              <th class="hidden md:table-cell py-2 px-2 text-center">
                Pulang
              </th>

              <th class="py-2 px-2 text-center">
                Status
              </th>
            </tr>
          </thead>

          <tbody>
            {{ range $i, $r := .Hadir }}
            <tr 
              id="row-{{ $r.Uid }}"
              hx-get="/api/home/row/{{ $r.Uid }}"
              hx-trigger="refresh"
              hx-swap="outerHTML"
              class="border-t border-slate-200 hover:bg-slate-100 transition">

              <td class="py-1.5 px-2 text-center text-slate-600">
                {{ add $i 1 }}
              </td>

              <!-- HIDDEN DI MOBILE -->
              <td class="hidden md:table-cell py-1.5 px-2 text-center font-mono text-slate-600">
                {{ $r.Uid }}
              </td>

              <td class="py-1.5 px-2 text-left font-medium text-slate-800 whitespace-nowrap">
                {{ $r.Nama }}
              </td>

              <td class="py-1.5 px-2 text-center text-slate-700 whitespace-nowrap">
                {{ $r.Masuk }}
              </td>

              <!-- HIDDEN DI MOBILE -->
              <td class="hidden md:table-cell py-1.5 px-2 text-center text-slate-700">
                {{ if $r.Pulang }}
                  {{ $r.Pulang }}
                {{ else }}
                  -
                {{ end }}
              </td>

              <td class="py-1.5 px-2 text-center whitespace-nowrap">
                {{ if eq $r.Status "MASUK" }}
                <span class="px-2 py-0.5 text-[10px] rounded-full bg-green-600 text-white font-medium">
                  ✔ Masuk
                </span>
                {{ else }}
                <span class="px-2 py-0.5 text-[10px] rounded-full bg-orange-500 text-white font-medium">
                  ⏱ Pulang
                </span>
                {{ end }}
              </td>
            </tr>
            {{ else }}
            <tr>
              <td colspan="6" class="py-4 text-center text-slate-500">
                Tidak ada siswa hadir
              </td>
            </tr>
            {{ end }}
          </tbody>
        </table>
      </div>

    </div>

    <!-- ================= SISWA TANPA KETERANGAN ================= -->
    <div class="bg-slate-50 border border-slate-200 rounded-lg shadow-sm p-3">

      <h2 class="text-sm font-semibold text-slate-700 mb-2">
        Siswa Tanpa Keterangan
      </h2>

      <div class="overflow-x-auto md:overflow-visible">
        <table class="min-w-full text-[11px] md:text-xs border border-slate-200 rounded-md overflow-hidden">
          <thead class="bg-slate-100 text-slate-700">
            <tr>
              <th class="py-2 px-2 text-center w-8">No</th>

              <!-- HIDDEN DI MOBILE -->
              <th class="hidden md:table-cell py-2 px-2 text-center">
                ID
              </th>

              <th class="py-2 px-2 text-left">
                Nama
              </th>

              <th class="py-2 px-2 text-center">
                Status
              </th>
            </tr>
          </thead>

          <tbody>
            {{ range $i, $r := .TanpaKeterangan }}
            <tr class="border-t border-slate-200 hover:bg-slate-100 transition">
              <!-- <td class="py-1.5 px-2 text-center text-slate-600">
                {{ add $i 1 }}
              </td> -->
              <td class="no-cell text-center text-slate-600"></td>

              <!-- HIDDEN DI MOBILE -->
              <td class="hidden md:table-cell py-1.5 px-2 text-center font-mono text-slate-600">
                {{ $r.ID }}
              </td>

              <td class="py-1.5 px-2 text-left font-medium text-slate-800 whitespace-nowrap">
                {{ $r.Nama }}
              </td>

              <td class="py-1.5 px-2 text-center">
                <span class="px-2 py-0.5 text-[10px] rounded-full bg-slate-400 text-white font-medium">
                  Tidak Absen
                </span>
              </td>
            </tr>
            {{ else }}
            <tr>
              <td colspan="4" class="py-4 text-center text-slate-500">
                Semua siswa hadir
              </td>
            </tr>
            {{ end }}
          </tbody>
        </table>
      </div>

    </div>

  </div>

</div>
</div>