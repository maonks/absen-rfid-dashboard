<style>
/* tampil di layar saja */
.screen-only {
  display: block;
}

/* tampil di print saja */
.print-only {
  display: none;
}

@media print {

  /* sembunyikan semua */
  body * {
    visibility: hidden;
  }

  /* tampilkan hanya area print */
  #print-area, #print-area * {
    visibility: visible;
  }

  #print-area {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
  }

  /* judul print aktif */
  .print-only {
    display: block;
  }

  /* judul normal & filter disembunyikan */
  .screen-only {
    display: none;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    font-size: 11px;
  }

  th, td {
    border: 1px solid black;
    padding: 4px;
  }

  h2 {
    text-align: center;
    margin-bottom: 8px;
  }

  @page {
    size: A4 landscape;
    margin: 10mm;
  }
}

/* default: desktop */
.th-mobile {
  display: none;
}
.th-desktop {
  display: inline;
}

/* mode mobile */
@media (max-width: 640px) {
  .th-mobile {
    display: inline;
  }
  .th-desktop {
    display: none;
  }

  table {
    font-size: 10px;
  }

  th, td {
    padding: 2px !important;
  }
}

</style>






  <h2 class="text-lg font-bold mb-3 screen-only">Report Bulanan Per Kelas</h2>

<!-- FILTER BAR -->
<form method="GET"
      action="/report/bulanan/kelas"
      class="flex flex-wrap items-center gap-2 text-[11px] mb-3 screen-only">

  <!-- KELAS -->
  <select name="kelas_id" class="border rounded px-2 py-1 bg-white">
    <option value="">Pilih Kelas</option>
    {{ range .Kelas }}
      <option value="{{ .ID }}" {{ if eq $.KelasID .ID }}selected{{ end }}>
        {{ .Nama }}
      </option>
    {{ end }}
  </select>

  <!-- JURUSAN -->
  <select name="jurusan_id" class="border rounded px-2 py-1 bg-white">
    <option value="">Semua Jurusan</option>
    {{ range .Jurusan }}
      <option value="{{ .ID }}" {{ if eq $.JurusanID .ID }}selected{{ end }}>
        {{ .Nama }}
      </option>
    {{ end }}
  </select>

  <!-- BULAN -->
  <select name="bulan" class="border rounded px-2 py-1 bg-white">
    <option value="">Pilih Bulan</option>
    {{ range .BulanList }}
      <option value="{{ .Value }}" {{ if eq $.Bulan .Value }}selected{{ end }}>
        {{ .Label }}
      </option>
    {{ end }}
  </select>

  <!-- TAHUN -->
  <select name="tahun" class="border rounded px-2 py-1 bg-white">
    {{ range .TahunList }}
      <option value="{{ . }}" {{ if eq $.Tahun . }}selected{{ end }}>
        {{ . }}
      </option>
    {{ end }}
  </select>

  <!-- BUTTON -->
  <button type="submit"
          class="px-3 py-1 rounded bg-slate-700 text-white hover:bg-slate-800">
    üîç Generate
  </button>

  <button type="button"
        onclick="printReport()"
        class="px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700">
    üñ®Ô∏è Print
  </button>


  {{ if .Rows }}
  <a href="/report/bulanan/kelas/excel?kelas_id={{.KelasID}}&jurusan_id={{.JurusanID}}&bulan={{.Bulan}}&tahun={{.Tahun}}"
     class="px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700">
     üìä Export Excel
  </a>
  {{ end }}

</form>

<div id="print-area">   
  
   <h2 class="text-lg font-bold mb-3 text-center print-only">
      Report Bulanan
      {{ if .KelasID }}Kelas {{ .KelasName }}{{ end }}
      {{ if .JurusanID }} - {{ .JurusanName }}{{ end }}
      <br>
      Periode: {{ .BulanLabel }} {{ .Tahun }}
  </h2>


  <!-- TABLE -->
  <div class="overflow-x-auto">
  <table class="w-full border text-[11px]">
    <thead class="bg-slate-100 sticky-header">
      <tr>
        <th class="border px-2 py-1">No</th>
        <th class="border px-2 py-1">Nama</th>
        <th class="border px-2 py-1">Kelas</th>
        <th class="border px-2 py-1">Jurusan</th>

        <th class="border px-2 py-1">
          <span class="th-desktop">Hadir</span>
          <span class="th-mobile">HD</span>
        </th>
        <th class="border px-2 py-1">
          <span class="th-desktop">Telat</span>
          <span class="th-mobile">TL</span>
        </th>
        <th class="border px-2 py-1">
          <span class="th-desktop">Sakit</span>
          <span class="th-mobile">SK</span>
        </th>
        <th class="border px-2 py-1">
          <span class="th-desktop">Izin</span>
          <span class="th-mobile">IJ</span>
        </th>
        <th class="border px-2 py-1">
          <span class="th-desktop">Alpa</span>
          <span class="th-mobile">AL</span>
        </th>
      </tr>
    </thead>

    <tbody>
      {{ range $i,$row:= .Rows }}
      <tr class="border-b cell">
        <td class="border px-2 py-1 text-center">{{ add $i 1 }}</td>
        <td class="border px-2 py-1 sticky-name">{{ .Nama }}</td>
        <td class="border px-2 py-1">{{ .Kelas }}</td>
        <td class="border px-2 py-1">{{ .Jurusan }}</td>
        <td class="border px-2 py-1 text-center">{{ .Hadir }}</td>
        <td class="border px-2 py-1 text-center">{{ .Telat }}</td>
        <td class="border px-2 py-1 text-center">{{ .Sakit }}</td>
        <td class="border px-2 py-1 text-center">{{ .Izin }}</td>
        <td class="border px-2 py-1 text-center">{{ .Alpa }}</td>
      </tr>
      {{ end }}
    </tbody>
  </table>
  </div>

</div>


<script>
function printReport() {
  window.print();
}
</script>
