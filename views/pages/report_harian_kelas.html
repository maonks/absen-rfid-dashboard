<style>
/* tampil di layar saja */
.screen-only { display:block }
.print-only { display:none }

@media print {
  body * { visibility:hidden }
  #print-area, #print-area * { visibility:visible }
  #print-area { position:absolute; left:0; top:0; width:100% }
  .print-only { display:block }
  .screen-only { display:none }

  table { width:100%; border-collapse:collapse; font-size:11px }
  th,td { border:1px solid black; padding:4px }
  h2 { text-align:center; margin-bottom:8px }

  @page { size:A4 landscape; margin:10mm }
}

/* default: desktop */
.th-mobile { display:none }
.th-desktop { display:inline }

/* mobile */
@media (max-width:640px){
  .th-mobile{display:inline}
  .th-desktop{display:none}
  table{font-size:10px}
  th,td{padding:2px!important}
}
</style>

<h2 class="text-lg font-bold mb-3 screen-only">
  Report Harian Kehadiran Siswa
</h2>

<!-- FILTER -->
<form method="GET" action="/report/harian/kelas" class="screen-only w-full mb-3 text-[11px]">
  <div class="flex flex-wrap gap-2">

    <select name="kelas_id" class="border rounded px-2 py-1">
      <option value="">Kelas</option>
      {{ range .Kelas }}
        <option value="{{ .ID }}" {{ if eq $.KelasID .ID }}selected{{ end }}>
          {{ .Nama }}
        </option>
      {{ end }}
    </select>

    <select name="jurusan_id" class="border rounded px-2 py-1">
      <option value="">Jurusan</option>
      {{ range .Jurusan }}
        <option value="{{ .ID }}" {{ if eq $.JurusanID .ID }}selected{{ end }}>
          {{ .Nama }}
        </option>
      {{ end }}
    </select>

    <input type="date" name="start_date" value="{{ .StartDate }}" class="border rounded px-2 py-1">
    <input type="date" name="end_date" value="{{ .EndDate }}" class="border rounded px-2 py-1">

    <button class="px-3 py-1 bg-slate-700 text-white rounded">
      üîç Generate
    </button>

    <!-- PRINT -->
    <button type="button"
      onclick="window.print()"
      class="px-3 py-1 bg-blue-600 text-white rounded">
      üñ®Ô∏è Print
    </button>

    {{ if .Rows }}
    <button type="button"
      onclick="window.location.href='/report/harian/kelas/excel?kelas_id={{.KelasID}}&jurusan_id={{.JurusanID}}&start_date={{.StartDate}}&end_date={{.EndDate}}'"
      class="px-3 py-1 bg-green-600 text-white rounded">
      üìä Excel
    </button>
    {{ end }}

  </div>
</form>

<!-- PRINT AREA -->
<div id="print-area">

  <!-- JUDUL PRINT -->
  <h2 class="text-lg font-bold mb-3 text-center print-only">
    Report Harian Kehadiran Siswa
    {{ if .KelasID }} Kelas {{ .KelasName }}{{ end }}
    {{ if .JurusanID }} - {{ .JurusanName }}{{ end }}
    <br>
    Periode: {{ .StartDate }} s/d {{ .EndDate }}
  </h2>

  <!-- TABLE -->
  <div class="overflow-x-auto">
    <table class="w-full border text-[11px]">
      <thead class="bg-slate-100 sticky-header">
        <tr>
          <th class="border px-2 py-1">No</th>
          <th class="border px-2 py-1">Nama</th>
          <th class="border px-2 py-1">Kelas</th>
          <th class="border px-2 py-1">Jurusan</th>

          <th class="border px-2 py-1">
            <span class="th-desktop">Hadir</span>
            <span class="th-mobile">HD</span>
          </th>
          <th class="border px-2 py-1">
            <span class="th-desktop">Telat</span>
            <span class="th-mobile">TL</span>
          </th>
          <th class="border px-2 py-1">
            <span class="th-desktop">Sakit</span>
            <span class="th-mobile">SK</span>
          </th>
          <th class="border px-2 py-1">
            <span class="th-desktop">Izin</span>
            <span class="th-mobile">IJ</span>
          </th>
          <th class="border px-2 py-1">
            <span class="th-desktop">Alpa</span>
            <span class="th-mobile">AL</span>
          </th>
        </tr>
      </thead>

      <tbody>
        {{ range $i,$row:= .Rows }}
        <tr class="border-b cell">
          <td class="border px-2 py-1 text-center">{{ add $i 1 }}</td>
          <td class="border px-2 py-1 sticky-name">{{ .Nama }}</td>
          <td class="border px-2 py-1">{{ .Kelas }}</td>
          <td class="border px-2 py-1">{{ .Jurusan }}</td>
          <td class="border px-2 py-1 text-center">{{ .Hadir }}</td>
          <td class="border px-2 py-1 text-center">{{ .Telat }}</td>
          <td class="border px-2 py-1 text-center">{{ .Sakit }}</td>
          <td class="border px-2 py-1 text-center">{{ .Izin }}</td>
          <td class="border px-2 py-1 text-center">{{ .Alpa }}</td>
        </tr>
        {{ end }}
      </tbody>
    </table>
  </div>

</div>
